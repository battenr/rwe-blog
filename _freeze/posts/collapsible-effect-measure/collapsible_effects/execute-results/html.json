{
  "hash": "17c2b1e1066d84605efb32ff8f9ba79b",
  "result": {
    "markdown": "---\ntitle: \"Collapsibility/Non-collapsibility\" \nsubtitle: \"TBD\"\nauthor: \"Ryan Batten\"\ndate: \"2023-03-02\"\ncategories: [Nested Models, G-Estimation]\n# image : \"standards.png\"\nbibliography: structural_nested_models.bib\ndraft: true\nformat: \n  html:\n    toc: true\n    toc-title: Contents\n    toc-location: right\n    toc-depth: 4\n    code-fold: true\n---\n\n\n## Title Options (Delete)\n\nTitle options (from ChatGPT)\n\n1.  \"In a Game of Statistical Jenga, Odds Ratios and Hazard Ratios Never Collapse!\"\n\n2.  \"Non-Collapsible Ratios: When Your Statistics Have Better Posture Than You!\"\n\n3.  \"Non-Collapsible Effect Measures: Because Some Ratios Just Won't Fold Under Pressure!\"\n\n4.  \"Odds Ratios and Hazard Ratios: The Non-Collapsible Chairs of Epidemiology.\"\n\n## Collapsible? \n\n\\\n\\## Ratios\n\n## Ratios\n\nOdds ratios (OR) and hazard ratios (HR) are two types of effect measures used in epidemiology and statistics to compare the risk or odds of an event happening in two different groups. They are considered non-collapsible effect measures because they can change when additional variables are adjusted for in a model, even if these variables do not interact with the exposure variable.\n\nNon-collapsibility refers to the property that the measure of effect for a particular exposure can change when a variable that is not a confounder is added to the model.\n\n1.  **Odds Ratios**: Odds ratios are calculated as the odds of an event occurring in the exposed group divided by the odds of the event occurring in the unexposed group. They are non-collapsible because the odds ratio calculated in a simple unadjusted analysis can be different from the odds ratio calculated in a multivariable model that adjusts for other variables. This is a consequence of the mathematical properties of the odds ratio.\n\n2.  **Hazard Ratios**: Hazard ratios are used in survival analysis and are calculated as the hazard (or risk) of an event in the exposed group divided by the hazard in the unexposed group. They are also non-collapsible because the hazard ratio can change when other variables are added to a Cox proportional hazards model, even if these variables are not confounders.\n\nThis feature of ORs and HRs is important to consider in statistical analysis, as it can lead to different interpretations of the data depending on what variables are included in the model. It's also a key reason why researchers carefully consider which variables to include in their models.\n\nIn contrast, other measures of effect like risk ratios or risk differences are collapsible, meaning they remain the same whether or not non-confounding variables are adjusted for in the model.\n\n## Simulated Data \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# From ChatGPT\n\n# Load required library\n\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\n# Set seed for reproducibility\n\nset.seed(123)\n\n# Simulate data\n\nN <- 10000 # Number of observations\n\nz <- rbinom(N, 1, 0.5) # Covariate (not a confounder)\n\nx <- rbinom(N, 1, 0.5 + 0.3*z) # Exposure\n\ny <- rbinom(N, 1, 0.5 + 0.3*x + 0.3*z) # Outcome\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in rbinom(N, 1, 0.5 + 0.3 * x + 0.3 * z): NAs produced\n```\n:::\n\n```{.r .cell-code}\n# Combine into a data frame\n\ndata <- data.frame(y = y, x = x, z = z)\n\n# Calculate the crude (unadjusted) odds ratio\n\ncrude_or <- exp(coef(glm(y ~ x, data = data, family = \"binomial\"))[\"x\"])\n\n# Calculate the adjusted odds ratio\n\nadj_or <- exp(coef(glm(y ~ x + z, data = data, family = \"binomial\"))[\"x\"])\n\nprint(paste(\"Crude Odds Ratio: \", crude_or))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Crude Odds Ratio:  2.88761029799451\"\n```\n:::\n\n```{.r .cell-code}\nprint(paste(\"Adjusted Odds Ratio: \", adj_or))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Adjusted Odds Ratio:  3.90776960011745\"\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}